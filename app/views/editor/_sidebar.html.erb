<h3>Bookmarks</h3>

<div class="dropzone" is="sidebar-dropzone-bookmarks">
  <% if bookmarked_documents = current_user.bookmarked_documents.presence %>
    <ul class="list-reset">
      <% bookmarked_documents.each do |document| %>
        <li class="sidebar-item-document">
          <%= render "editor/documents/sidebar_item", document: document %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <div class="dropzone-empty">
      Drag and drop documents here to create bookmarks
    </div>
  <% end %>
</div>

<h3>Documents</h3>

<ul class="list-reset margin-1/2-bottom">
  <% current_user.stacks.without_root.each do |stack| %>
    <li class="sidebar-item-stack dropzone" is="sidebar-item-stack" stack="<%= stack.to_param %>">
      <%= render "editor/stacks/sidebar_item", stack: stack, documents: stack.documents %>
    </li>
  <% end %>
</ul>

<ul class="list-reset margin-1/2-bottom dropzone" is="sidebar-item-root-stack">
  <% current_user.root_stack.documents.each do |document| %>
    <li class="sidebar-item-document" is="sidebar-item-document" document="<%= document.to_param %>">
      <%= render "editor/documents/sidebar_item", document: document %>
    </li>
  <% end %>
</ul>

<ul class="list-reset margin-top">
  <li>
    <modal>
      <div class="media media-middle media-1/2" slot="modal-trigger">
        <%= icon_tag "ios-compose-outline" %>
        <div class="media-body">New document</div>
      </div>

      <%= form_for [:editor, Document.new], html: { class: "form-inline" } do |form| %>
        <%= form.text_field :name, placeholder: "Type document name..", autofocus: true %>
        <%= form.submit "Create" %>
      <% end %>
    </modal>
  </li>

  <li>
    <modal>
      <div class="media media-middle media-1/2" slot="modal-trigger">
        <%= icon_tag "ios-box-outline" %>
        <div class="media-body">New stack</div>
      </div>

      <%= form_for [:editor, Stack.new], html: { class: "form-inline" } do |form| %>
        <%= form.text_field :name, placeholder: "Type stack name..", autofocus: true %>
        <%= form.submit "Create" %>
      <% end %>
    </modal>
  </li>

  <li class="margin-top">
    <%= link_to editor_trash_path, class: "media media-middle media-1/2" do %>
      <%= icon_tag "ios-trash-outline" %>
      <div class="media-body">Trash</div>
    <% end %>
  </li>
</ul>
